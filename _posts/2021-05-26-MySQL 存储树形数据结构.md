---
layout: mypost
title: MySQL 存储树形数据结构
categories: [MySQL]
---

## 问题描述
在一些业务场景下会有树形结构的数据需要存储到数据库中。最简单的是储存系统中的操作菜单，一般情况下数据库中会有一个 `menu` 表用来存
储菜单。菜单常见的都是两级菜单比较多，三级菜单比较少见一点。菜单的深度还比较小，像商品的分类或者其它分类相关的数据可能会有 5 到 10 
层的深度，相对菜单而言这就是另一种情况。还有一种更复杂的情况就是理论上树的深度是无限的，就像 App 的拉新活动，新用户邀请老用户，这种
比较常见的实在分销体系中。那么像这种拉新活动，新用户邀请老用户就会在数据库中记录下新老用户的绑定关系，这样就能理论上 A 拉 B，B 拉 C，
C 拉 D，这样一直下去，树的深度理论上就是无限大。

通过上面的描述，可以总结成两种情况。第一种简单情况：这种情况下树的深度比较小，最好是 3 层以内，且确定不会超过 3 层。第二种情况就是
树的深度理论上无限大，即使在可预见的范围内大部分数据都在 10 层以内，但是业务或者理论上是允许无限深度的。
