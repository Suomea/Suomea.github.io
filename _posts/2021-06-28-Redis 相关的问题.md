---
layout: mypost
title: Redis 相关的问题
categories: [Redis]
---

## 为什么要使用 Redis？ 2021-06-28
1. 减轻数据库的访问压力（其实就是限制请求走到数据库的请求数量）。
2. 缓存命中的话能够加快请求的处理，缩短响应时间。
3. Redis 相关的问题基本上都是为了使 1 成立，顺便完成了 2（再加一个分布式锁）。

## Redis 是先更新数据库还是先更新 Redis？ Redis 和数据库的一致性怎么保证（或者说是事务）？ 2021-06-28

## Redis 有哪些数据结构，实际使用的场景？ 2021-06-28

## Redis 大量查询数据库一定不存在的数据（缓存穿透）？ 2021-06-28
1. 缓存空值，即使数据库没有数据把空值也缓存到 Redis 中。
2. 数据量特别大的话，Redis 缓存空置也会占用很大的空间，这个时候可以使用布隆过滤器来进行过滤处理。一来节省 key 占用的空间，二来不存在的 key 重复访问就直接 Redis 拦截掉。
3. 不存在数据被访问，如果请求的量巨大的话，也可能是恶意的攻击，走风控防护。

## Redis 大量的缓存在同一时间集体失效（缓存雪崩）？ 2021-06-28
1. 避免过期时间集体失效，打散过期时间。
2. 热点数据永不过期。

## Redis 超级热点数据失效（缓存击穿）？ 2021-06-28
1. 请求的 key 加分布式锁。请求流程是先去 redis 里面拿数据，拿不到的话拿分布式锁，拿到锁之后再去请求数据库，缓存数据。
2. 走 JVM 锁也行，保证单台服务器只有一个请求走到数据库，同时性能也高一点。
3. 超级热点数据永不过期。

> 很多面试官都会问缓存穿透、缓存雪崩、缓存击穿怎么处理，其实没有办法处理，只能看着事情发生，能扛得住就抗，扛不住就是事故。而我们要做的是只能预防事情的发生，预防而不是处理。

## Redis 分布式锁命令？使用 Redission 实现分布式锁的原理？ 2021-06-28
```shell
# set name jacky ex 120 nx
```
ex 指定过期时间 120 秒。 nx 限定了在 key 不存在的情况下才能执行成功。如果执行成功（获锁成功）的话在命令行返回 "OK"，如果执行失败（获锁失败）的话在命令行返回 "（nil）"。


## 缓存预热？ 2021-07-06
在 Spring Boot 项目中可以实现 `ApplicationRunner` 接口，实现对缓存的预热处理。

## 秒杀活动的设计？ 2021-07-06
1. 库存缓存到 Redis，直接扣减 Redis 的库存。
   - 优点：简单、公平（先到先得）。
   - 缺点：考验 Redis 的服务能力。  
    
2. 在 1 的基础之上加限流，通过走 1 的流程，没通秒杀失败。
   - 优点：简单。
   - 缺点：不是很公平（相对先到先得）。
    
3. 秒杀活动开始前，运营人员分配库存到每台机器。
   - 优点：高性能、释放 Redis 压力。
   - 缺点：不是很灵活（库存需要预先分配好）、不是很公平（不是相对的先到先得）。

## Redis 缓存树型结构怎么处理，并且树形结构某个节点可能过期？ 2021-07-06

## Redis 数据结构的时间复杂度？ 2021-07-06

## Redis 的持久化？ 2021-07-12

## Redis 的数据结构及底层实现？ 2021-07-12
<br/>