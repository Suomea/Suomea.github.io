---
layout: mypost
title: Redis 相关的问题
categories: [Redis]
---

## 为什么要使用 Redis？ 2021-06-28
1. 减轻数据库的访问压力（其实就是限制请求走到数据库的请求数量）。
2. 缓存命中的话能够加快请求的处理，缩短响应时间。
3. Redis 相关的问题基本上都是为了使 1 成立，顺便完成了 2（再加一个分布式锁）。

## Redis 是先更新数据库还是先更新 Redis？ Redis 和数据库的一致性怎么保证（或者说是事务）？ 2021-06-28

## Redis 有哪些数据结构，实际使用的场景？ 2021-06-28

## Redis 大量查询数据库一定不存在的数据（缓存穿透）？ 2021-06-28
1. 缓存空值，即使数据库没有数据把空值页缓存到 Redis 中。
2. 大量的数据不存在数据被访问，可能是恶意的攻击，走风控防护。
3. 布隆过滤器（详细了解一下，我请求一万亿个 key，每个 key 都不一样怎么弄）。

## Redis 大量的缓存在同一时间集体失效（缓存雪崩）？ 2021-06-28
1. 避免过期时间集体失效，打散过期时间。
2. 热点数据永不过期。

## Redis 超级热点数据失效（缓存击穿）？ 2021-06-28
1. 请求的 key 加分布式锁。请求流程是先去 redis 里面拿数据，拿不到的话拿分布式锁，拿到锁之后再去请求数据库，缓存数据。
2. 走 JVM 锁也行，保证单台服务器只有一个请求走到数据库，同时性能也高一点。
3. 超级热点数据永不过期。

> 很多面试官都会问缓存穿透、缓存雪崩、缓存击穿怎么处理，其实没有办法处理，只能看着事情发生，能扛得住就抗，扛不住就是事故。而我们要做的是只能预防事情的发生，预防而不是处理。

## Redis 分布式锁命令？使用 Redission 实现分布式锁的原理？ 2021-06-28
```shell
# set name jacky ex 120 nx
```
ex 指定过期时间 120 秒。 nx 限定了在 key 不存在的情况下才能执行成功。如果执行成功（获锁成功）的话在命令行返回 "OK"，如果执行失败（获锁失败）的话在命令行返回 "（nil）"。
